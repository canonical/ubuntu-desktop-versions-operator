<VirtualHost *:${port}>
    ServerName ${domain}
    DocumentRoot /var/www/html/versions

    <Directory /var/www/html/versions>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    # Security headers
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"

    # Remove server signature
    ServerSignature Off

    # Enable compression for text files
    <IfModule mod_deflate.c>
        AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
    </IfModule>

    # Set proper caching headers for static content
    <IfModule mod_expires.c>
        ExpiresActive On
        ExpiresByType text/html "access plus 1 hour"
        ExpiresByType application/json "access plus 1 hour"
    </IfModule>

    ErrorLog $${APACHE_LOG_DIR}/ubuntu-desktop-versions-error.log
    CustomLog $${APACHE_LOG_DIR}/ubuntu-desktop-versions-access.log combined
</VirtualHost>
